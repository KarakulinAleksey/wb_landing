(()=>{"use strict";var e=document.querySelectorAll(".content-block__control-panel_item"),t=document.querySelector(".view-block__lamp"),n=document.querySelector(".view-block"),o=document.querySelector(".content-block__control-panel_botton-light"),c=document.querySelector(".content-block__control-panel_botton-night"),a=document.querySelectorAll(".content-block__text.text-light"),i=document.querySelector(".content-block__image"),r=document.querySelector(".content-block");function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(t){var n=t.baseUrl,o=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=o}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getAllLamp",value:function(){return fetch("".concat(this._baseUrl),{method:"GET",headers:this._headers}).then(this._checkResponse)}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m=function(){function e(t,n,o,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._controlPanelButtonLamp=t,this._contentBlockSpecificationsLamp=n,this._viewBlock=o,this._contentBlock=c}var t,n;return t=e,n=[{key:"addSpecificationsLamp",value:function(e){this._contentBlockSpecificationsLamp[0].innerHTML=this._upperCase(e.material),this._contentBlockSpecificationsLamp[1].innerHTML="H"+e.height+" x W"+e.width+" x D15",this._contentBlockSpecificationsLamp[2].innerHTML=e.weight+" kg",this._contentBlockSpecificationsLamp[3].innerHTML=this._joinText(e.electrification)}},{key:"_upperCase",value:function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}},{key:"_joinText",value:function(e){return e.split(",").join(" |")}},{key:"addBackgroundControlPanelButtonLamp",value:function(e){e.classList.add("content-block__control-panel_item-focus")}},{key:"resetBackgroundControlPanelButtonLamp",value:function(){this._controlPanelButtonLamp.forEach((function(e){e.classList.remove("content-block__control-panel_item-focus")}))}},{key:"_createElement",value:function(e,t,n,o,c,a){a.querySelector(e)?(this._imageElement=document.createElement(t),this._imageElement.src=c.image,this._imageElement.classList.add(n),a.querySelector(e).replaceWith(this._imageElement)):(this._imageElement=document.createElement(t),this._imageElement.src=c.image,this._imageElement.classList.add(n),a.querySelector(o).replaceWith(this._imageElement))}},{key:"addImageViewBlock",value:function(e){this._createElement(".preloader","img","view-block__lamp",".view-block__lamp",e,this._viewBlock)}},{key:"addImageContentBlock",value:function(e){this._createElement(".preloader","img","content-block__image",".content-block__image",e,this._contentBlock)}},{key:"addElement",value:function(e,t){var n=this;this._imageListItem=document.createElement("img"),this._imageListItem.src=e.image,this._imageListItem.classList.add("content-block__control-panel_image-light"),t.addEventListener("click",(function(o){n.addSpecificationsLamp(e),n.addImageViewBlock(e),n.addImageContentBlock(e),n.resetBackgroundControlPanelButtonLamp(),n.addBackgroundControlPanelButtonLamp(t)})),t.querySelector(".preloader").replaceWith(this._imageListItem)}},{key:"removePreloader",value:function(e){e.forEach((function(e){e.remove()}))}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=new m(e,a,n,r),p=document.querySelector("#preloader").content,_=[];e.forEach((function(e,t){_[t]=p.querySelector(".preloader").cloneNode(!0),e.append(_[t])}));var h=p.querySelector(".preloader").cloneNode(!0);h.classList.add("preloader__viewBlock-position"),t.replaceWith(h);var k=p.querySelector(".preloader").cloneNode(!0);k.classList.add("preloader__contentBlock-position"),i.replaceWith(k),c.addEventListener("click",(function(){n.classList.add("view-block__background-night")})),o.addEventListener("click",(function(){n.classList.remove("view-block__background-night")})),new s({baseUrl:"https://private-anon-f453b48ec0-lampshop.apiary-mock.com/lamps",headers:{"Content-Type":"application/json"}}).getAllLamp().then((function(t){for(var n=0;n<3;n++)d.addElement(t[n],e[n]);d.addSpecificationsLamp(t[0]),d.addImageViewBlock(t[0]),d.addImageContentBlock(t[0]),d.addBackgroundControlPanelButtonLamp(e[0])})).catch((function(e){console.log("Error "+e)}))})();